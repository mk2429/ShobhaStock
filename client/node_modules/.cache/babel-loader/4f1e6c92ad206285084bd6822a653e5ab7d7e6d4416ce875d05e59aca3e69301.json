{"ast":null,"code":"import React,{useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function EditProductCard(_ref){let{pname,bname,cname,price,quantity,pimage,pid,updateProduct}=_ref;const validPrice=typeof price==='object'?price.$numberDecimal:price;const validQuantity=typeof quantity==='object'?quantity.$numberDecimal:quantity;const[showOverlay,setShowOverlay]=useState(false);const[newPrice,setNewPrice]=useState(validPrice);const[newQuantity,setNewQuantity]=useState(validQuantity);const[loading,setLoading]=useState(false);const handleEditClick=()=>setShowOverlay(true);const handleCloseOverlay=()=>{setShowOverlay(false);setNewPrice(validPrice);// Reset to initial price\nsetNewQuantity(validQuantity);// Reset to initial quantity\n};const handleSubmit=async e=>{e.preventDefault();const updateData={pid:String(pid),quantity:newQuantity,price:newPrice};setLoading(true);try{const response=await fetch('https://shobha-stock.onrender.com/editproduct',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(updateData)});const responseText=await response.text();if(response.ok){alert('Product updated successfully!');updateProduct({id:pid,price:newPrice,quantity:newQuantity});// Update product in parent\nhandleCloseOverlay();}else{alert(`Failed to update the product: ${responseText}`);}}catch(error){console.error('Error:',error);alert('An error occurred while updating the product.');}finally{setLoading(false);}};return/*#__PURE__*/_jsxs(\"div\",{style:{position:'relative',width:'160px'},children:[/*#__PURE__*/_jsxs(\"div\",{className:\"card\",style:cardStyle,children:[/*#__PURE__*/_jsx(\"img\",{className:\"card-img-top\",src:pimage,alt:\"Product\",style:{width:'160px',height:'100px',objectFit:'contain'}}),/*#__PURE__*/_jsxs(\"div\",{className:\"card-body d-flex flex-column\",style:{flex:'1',height:'150px'},children:[/*#__PURE__*/_jsx(\"p\",{className:\"card-title text-align-center mb-2\",style:titleStyle,children:pname}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text text-align-center my-0 \",style:{textAlign:\"center\"},children:[\"\\u20B9\",validPrice]}),/*#__PURE__*/_jsxs(\"p\",{className:\"card-text text-align-center mb-3\",style:{textAlign:\"center\"},children:[\"Available-\",validQuantity,\" Pcs\"]}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-danger\",onClick:handleEditClick,children:\"Edit\"})]})]}),showOverlay&&/*#__PURE__*/_jsx(\"div\",{style:overlayStyle,children:/*#__PURE__*/_jsxs(\"div\",{style:formContainerStyle,children:[/*#__PURE__*/_jsx(\"button\",{style:closeButtonStyle,onClick:handleCloseOverlay,children:\"X\"}),/*#__PURE__*/_jsxs(\"h3\",{children:[\"Edit \",pname]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Quantity\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:newQuantity,onChange:e=>setNewQuantity(e.target.value),required:true})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-group\",children:[/*#__PURE__*/_jsx(\"label\",{children:\"Price\"}),/*#__PURE__*/_jsx(\"input\",{type:\"number\",className:\"form-control\",value:newPrice,onChange:e=>setNewPrice(e.target.value),required:true})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-success mt-3\",disabled:loading,children:loading?'Loading...':'Submit'})]})]})})]});}// Styles\nconst cardStyle={boxShadow:'0 4px 8px 0 rgba(0, 0, 0, 0.2)',transition:'0.3s',borderRadius:'10px',height:'290px',display:'flex',flexDirection:'column'};const overlayStyle={position:'fixed',top:0,left:0,width:'100%',height:'100%',backgroundColor:'rgba(0, 0, 0, 0.7)',display:'flex',justifyContent:'center',alignItems:'center',zIndex:1000};const formContainerStyle={backgroundColor:'white',padding:'30px',borderRadius:'10px',width:'400px',position:'relative',boxShadow:'0 0 15px rgba(0, 0, 0, 0.3)'};const closeButtonStyle={position:'absolute',top:'10px',right:'10px',backgroundColor:'transparent',border:'none',fontSize:'20px',cursor:'pointer'};const titleStyle={textAlign:\"center\",fontSize:\"0.9rem\",overflow:\"hidden\",textOverflow:\"ellipsis\",whiteSpace:\"normal\",marginBottom:'auto'};","map":{"version":3,"names":["React","useState","jsx","_jsx","jsxs","_jsxs","EditProductCard","_ref","pname","bname","cname","price","quantity","pimage","pid","updateProduct","validPrice","$numberDecimal","validQuantity","showOverlay","setShowOverlay","newPrice","setNewPrice","newQuantity","setNewQuantity","loading","setLoading","handleEditClick","handleCloseOverlay","handleSubmit","e","preventDefault","updateData","String","response","fetch","method","headers","body","JSON","stringify","responseText","text","ok","alert","id","error","console","style","position","width","children","className","cardStyle","src","alt","height","objectFit","flex","titleStyle","textAlign","onClick","overlayStyle","formContainerStyle","closeButtonStyle","onSubmit","type","value","onChange","target","required","disabled","boxShadow","transition","borderRadius","display","flexDirection","top","left","backgroundColor","justifyContent","alignItems","zIndex","padding","right","border","fontSize","cursor","overflow","textOverflow","whiteSpace","marginBottom"],"sources":["C:/Users/hp/Downloads/ShobhaAd/frontend/src/Components/EditProductCard.jsx"],"sourcesContent":["import React, { useState } from 'react';\r\n\r\nexport default function EditProductCard({ pname, bname, cname, price, quantity, pimage, pid, updateProduct }) {\r\n    const validPrice = typeof price === 'object' ? price.$numberDecimal : price;\r\n    const validQuantity = typeof quantity === 'object' ? quantity.$numberDecimal : quantity;\r\n    const [showOverlay, setShowOverlay] = useState(false);\r\n    const [newPrice, setNewPrice] = useState(validPrice);\r\n    const [newQuantity, setNewQuantity] = useState(validQuantity);\r\n    const [loading, setLoading] = useState(false);\r\n\r\n    const handleEditClick = () => setShowOverlay(true);\r\n\r\n    const handleCloseOverlay = () => {\r\n        setShowOverlay(false);\r\n        setNewPrice(validPrice); // Reset to initial price\r\n        setNewQuantity(validQuantity); // Reset to initial quantity\r\n    };\r\n\r\n    const handleSubmit = async (e) => {\r\n        e.preventDefault();\r\n\r\n        const updateData = {\r\n            pid: String(pid),\r\n            quantity: newQuantity,\r\n            price: newPrice,\r\n        };\r\n\r\n        setLoading(true);\r\n\r\n        try {\r\n            const response = await fetch('https://shobha-stock.onrender.com/editproduct', {\r\n                method: 'POST',\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(updateData),\r\n            });\r\n\r\n            const responseText = await response.text();\r\n\r\n            if (response.ok) {\r\n                alert('Product updated successfully!');\r\n                updateProduct({ id: pid, price: newPrice, quantity: newQuantity }); // Update product in parent\r\n                handleCloseOverlay();\r\n            } else {\r\n                alert(`Failed to update the product: ${responseText}`);\r\n            }\r\n        } catch (error) {\r\n            console.error('Error:', error);\r\n            alert('An error occurred while updating the product.');\r\n        } finally {\r\n            setLoading(false);\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div style={{ position: 'relative', width: '160px' }}>\r\n            <div className=\"card\" style={cardStyle}>\r\n                <img\r\n                    className=\"card-img-top\"\r\n                    src={pimage}\r\n                    alt=\"Product\"\r\n                    style={{ width: '160px', height: '100px', objectFit: 'contain' }}\r\n                />\r\n                <div className=\"card-body d-flex flex-column\" style={{ flex: '1', height: '150px' }}>\r\n                    <p className=\"card-title text-align-center mb-2\" style={titleStyle}>{pname}</p>\r\n                    <p className=\"card-text text-align-center my-0 \" style={{textAlign:\"center\"}}>â‚¹{validPrice}</p>\r\n                    <p className=\"card-text text-align-center mb-3\" style={{textAlign:\"center\"}}>Available-{validQuantity} Pcs</p>\r\n                    <button className=\"btn btn-danger\" onClick={handleEditClick}>\r\n                        Edit\r\n                    </button>\r\n                </div>\r\n            </div>\r\n        \r\n            {showOverlay && (\r\n                <div style={overlayStyle}>\r\n                    <div style={formContainerStyle}>\r\n                        <button style={closeButtonStyle} onClick={handleCloseOverlay}>X</button>\r\n                        <h3>Edit {pname}</h3>\r\n                        <form onSubmit={handleSubmit}>\r\n                            <div className=\"form-group\">\r\n                                <label>Quantity</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"form-control\"\r\n                                    value={newQuantity}\r\n                                    onChange={(e) => setNewQuantity(e.target.value)}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <div className=\"form-group\">\r\n                                <label>Price</label>\r\n                                <input\r\n                                    type=\"number\"\r\n                                    className=\"form-control\"\r\n                                    value={newPrice}\r\n                                    onChange={(e) => setNewPrice(e.target.value)}\r\n                                    required\r\n                                />\r\n                            </div>\r\n                            <button type=\"submit\" className=\"btn btn-success mt-3\" disabled={loading}>\r\n                                {loading ? 'Loading...' : 'Submit'}\r\n                            </button>\r\n                        </form>\r\n                    </div>\r\n                </div>\r\n            )}\r\n        </div>\r\n    );\r\n}\r\n\r\n// Styles\r\nconst cardStyle = {\r\n    boxShadow: '0 4px 8px 0 rgba(0, 0, 0, 0.2)',\r\n    transition: '0.3s',\r\n    borderRadius: '10px',\r\n    height: '290px',\r\n    display: 'flex',\r\n    flexDirection: 'column',\r\n};\r\n  \r\nconst overlayStyle = {\r\n    position: 'fixed',\r\n    top: 0,\r\n    left: 0,\r\n    width: '100%',\r\n    height: '100%',\r\n    backgroundColor: 'rgba(0, 0, 0, 0.7)',\r\n    display: 'flex',\r\n    justifyContent: 'center',\r\n    alignItems: 'center',\r\n    zIndex: 1000,\r\n};\r\n  \r\nconst formContainerStyle = {\r\n    backgroundColor: 'white',\r\n    padding: '30px',\r\n    borderRadius: '10px',\r\n    width: '400px',\r\n    position: 'relative',\r\n    boxShadow: '0 0 15px rgba(0, 0, 0, 0.3)',\r\n};\r\n  \r\nconst closeButtonStyle = {\r\n    position: 'absolute',\r\n    top: '10px',\r\n    right: '10px',\r\n    backgroundColor: 'transparent',\r\n    border: 'none',\r\n    fontSize: '20px',\r\n    cursor: 'pointer',\r\n};\r\n\r\nconst titleStyle = {\r\n    textAlign: \"center\",\r\n    fontSize: \"0.9rem\",\r\n    overflow: \"hidden\",\r\n    textOverflow: \"ellipsis\",\r\n    whiteSpace: \"normal\",\r\n    marginBottom: 'auto',\r\n};\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}
{"ast":null,"code":"import React,{useEffect,useState}from'react';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";export default function ProductTable(){const[products,setProducts]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState(null);useEffect(()=>{const fetchProducts=async()=>{try{const response=await fetch('https://shobha-stock.onrender.com/getproducts',{method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify({bname:'All Brands',cname:'All Categories'})});if(!response.ok){throw new Error('Failed to fetch products');}const data=await response.json();console.log('Fetched Products:',data);// Log fetched data\n// Convert price and quantity fields if they are objects\nconst convertedProducts=data.map(product=>({...product,price:typeof product.price==='object'?product.price.$numberDecimal:product.price,quantity:typeof product.quantity==='object'?product.quantity.$numberDecimal:product.quantity}));// Sort the products first by bname, then by pname\nconst sortedProducts=convertedProducts.sort((a,b)=>{if(a.bname<b.bname)return-1;if(a.bname>b.bname)return 1;if(a.pname<b.pname)return-1;if(a.pname>b.pname)return 1;return 0;});setProducts(sortedProducts);}catch(error){setError(error.message);}finally{setLoading(false);}};fetchProducts();},[]);if(loading){return/*#__PURE__*/_jsx(\"div\",{className:\"text-center mt-4\",children:\"Loading...\"});}if(error){return/*#__PURE__*/_jsxs(\"div\",{className:\"text-danger text-center mt-4\",children:[\"Error: \",error]});}return/*#__PURE__*/_jsxs(\"div\",{className:\"container mt-5\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-center mb-4\",children:\"Product List\"}),/*#__PURE__*/_jsxs(\"table\",{className:\"table table-striped table-bordered\",children:[/*#__PURE__*/_jsx(\"thead\",{className:\"thead-dark\",children:/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"th\",{children:\"PNAME\"}),/*#__PURE__*/_jsx(\"th\",{children:\"QUANTITY\"}),/*#__PURE__*/_jsx(\"th\",{children:\"PRICE\"})]})}),/*#__PURE__*/_jsx(\"tbody\",{children:products.map((product,index)=>/*#__PURE__*/_jsxs(\"tr\",{children:[/*#__PURE__*/_jsx(\"td\",{children:product.pname}),/*#__PURE__*/_jsx(\"td\",{children:product.quantity}),/*#__PURE__*/_jsxs(\"td\",{children:[\"\\u20B9\",product.price]})]},index))})]})]});}","map":{"version":3,"names":["React","useEffect","useState","jsx","_jsx","jsxs","_jsxs","ProductTable","products","setProducts","loading","setLoading","error","setError","fetchProducts","response","fetch","method","headers","body","JSON","stringify","bname","cname","ok","Error","data","json","console","log","convertedProducts","map","product","price","$numberDecimal","quantity","sortedProducts","sort","a","b","pname","message","className","children","index"],"sources":["C:/Users/hp/Downloads/ShobhaAd/frontend/src/Components/ProductTable.jsx"],"sourcesContent":["import React, { useEffect, useState } from 'react';\r\n\r\nexport default function ProductTable() {\r\n  const [products, setProducts] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n\r\n  useEffect(() => {\r\n    const fetchProducts = async () => {\r\n      try {\r\n        const response = await fetch('https://shobha-stock.onrender.com/getproducts', {\r\n          method: 'POST',\r\n          headers: {\r\n            'Content-Type': 'application/json',\r\n          },\r\n          body: JSON.stringify({\r\n            bname: 'All Brands',\r\n            cname: 'All Categories',\r\n          }),\r\n        });\r\n\r\n        if (!response.ok) {\r\n          throw new Error('Failed to fetch products');\r\n        }\r\n\r\n        const data = await response.json();\r\n        console.log('Fetched Products:', data); // Log fetched data\r\n\r\n        // Convert price and quantity fields if they are objects\r\n        const convertedProducts = data.map(product => ({\r\n          ...product,\r\n          price: typeof product.price === 'object' ? product.price.$numberDecimal : product.price,\r\n          quantity: typeof product.quantity === 'object' ? product.quantity.$numberDecimal : product.quantity,\r\n        }));\r\n\r\n        // Sort the products first by bname, then by pname\r\n        const sortedProducts = convertedProducts.sort((a, b) => {\r\n          if (a.bname < b.bname) return -1;\r\n          if (a.bname > b.bname) return 1;\r\n          if (a.pname < b.pname) return -1;\r\n          if (a.pname > b.pname) return 1;\r\n          return 0;\r\n        });\r\n\r\n        setProducts(sortedProducts);\r\n      } catch (error) {\r\n        setError(error.message);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchProducts();\r\n  }, []);\r\n\r\n  if (loading) {\r\n    return <div className=\"text-center mt-4\">Loading...</div>;\r\n  }\r\n\r\n  if (error) {\r\n    return <div className=\"text-danger text-center mt-4\">Error: {error}</div>;\r\n  }\r\n\r\n  return (\r\n    <div className=\"container mt-5\">\r\n      <h2 className=\"text-center mb-4\">Product List</h2>\r\n      <table className=\"table table-striped table-bordered\">\r\n        <thead className=\"thead-dark\">\r\n          <tr>\r\n            <th>PNAME</th>\r\n            <th>QUANTITY</th>\r\n            <th>PRICE</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {products.map((product, index) => (\r\n            <tr key={index}>\r\n              <td>{product.pname}</td>\r\n              <td>{product.quantity}</td>\r\n              <td>â‚¹{product.price}</td>\r\n            </tr>\r\n          ))}\r\n        </tbody>\r\n      </table>\r\n    </div>\r\n  );\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}